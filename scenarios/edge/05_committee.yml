# Edge 05: Committee Approval - multiple approvers
name: edge_05_committee
seed: 60500
start_time: "2024-01-01T09:00:00Z"

events:
  - event: CustomerEvent::Initialized
    entity: customer_1
    values: {email: "committee@example.com", customer_type: Business}

  - event: CommitteeEvent::Initialized
    entity: committee_1
    after: 1h
    values: {name: "Credit Committee"}

  - event: CommitteeEvent::MemberAdded
    entity: committee_1
    after: 1m
    values: {user_id: "user_001", role: Approver}

  - event: CommitteeEvent::MemberAdded
    entity: committee_1
    after: 1m
    values: {user_id: "user_002", role: Approver}

  - event: CreditFacilityProposalEvent::Initialized
    entity: proposal_1
    after: 24h
    values:
      customer_id_ref: customer_1
      amount: 5000000
      customer_type: Business
      status: PendingApproval
      terms:
        annual_rate: "0.09"
        duration: {Months: 12}
        interest_due_duration_from_accrual: {Days: 30}
        accrual_cycle_interval: EndOfMonth
        accrual_interval: EndOfDay
        one_time_fee_rate: "0.01"
        liquidation_cvl: {Finite: "1.10"}
        margin_call_cvl: {Finite: "1.25"}
        initial_cvl: {Finite: "1.40"}
        disbursal_policy: SingleDisbursal

  - event: ApprovalProcessEvent::Initialized
    entity: approval_1
    after: 1h
    values: {committee_id_ref: committee_1}

  - event: ApprovalProcessEvent::Approved
    entity: approval_1
    after: 24h

  - event: ApprovalProcessEvent::Concluded
    entity: approval_1
    after: 1h
    values: {approved: true}

  - event: CreditFacilityProposalEvent::ApprovalProcessConcluded
    entity: proposal_1
    after: 1m
    values: {status: Approved}
