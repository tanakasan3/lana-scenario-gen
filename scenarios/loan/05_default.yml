# Loan 05: Default - overdue → defaulted → liquidation
name: loan_05_default
seed: 10500
start_time: "2027-01-01T09:00:00Z"

events:
  - event: CustomerEvent::Initialized
    entity: customer_1
    values: {email: "defaulter@example.com", customer_type: Individual}

  - event: CollateralEvent::Initialized
    entity: collateral_1
    after: 24h

  - event: CollateralEvent::UpdatedViaManualInput
    entity: collateral_1
    after: 1h
    values: {collateral: 30000000}

  - event: CreditFacilityEvent::Initialized
    entity: facility_1
    after: 24h
    values:
      customer_id_ref: customer_1
      collateral_id_ref: collateral_1
      amount: 1000000
      collateralization_state: FullyCollateralized
      collateral: 30000000
      price: "50000.00"
      terms:
        annual_rate: "0.15"
        duration: {Months: 6}
        interest_due_duration_from_accrual: {Days: 15}
        obligation_overdue_duration_from_due: {Days: 15}
        obligation_liquidation_duration_from_due: {Days: 30}
        accrual_cycle_interval: EndOfMonth
        accrual_interval: EndOfDay
        one_time_fee_rate: "0.02"
        liquidation_cvl: {Finite: "1.05"}
        margin_call_cvl: {Finite: "1.15"}
        initial_cvl: {Finite: "1.25"}
        disbursal_policy: SingleDisbursal

  - event: DisbursalEvent::Settled
    entity: disbursal_1
    after: 24h

  - event: ObligationEvent::Initialized
    entity: interest_1
    after: 30d
    values: {amount: 12500}

  - event: CreditFacilityEvent::CollateralizationStateChanged
    entity: facility_1
    after: 10d
    values: {collateralization_state: MarginCall, collateral: 30000000, price: "35000.00"}

  - event: ObligationEvent::DueRecorded
    entity: interest_1
    after: 5d

  - event: ObligationEvent::OverdueRecorded
    entity: interest_1
    after: 15d

  - event: CreditFacilityEvent::CollateralizationStateChanged
    entity: facility_1
    after: 5d
    values: {collateralization_state: UnderCollateralized, collateral: 30000000, price: "30000.00"}

  - event: ObligationEvent::DefaultedRecorded
    entity: interest_1
    after: 15d

  - event: LiquidationEvent::Initialized
    entity: liquidation_1
    after: 1d

  - event: CollateralEvent::LiquidationStarted
    entity: collateral_1
    after: 4h

  - event: LiquidationEvent::CollateralSentOut
    entity: liquidation_1
    after: 4h
    values: {amount: 30000000}

  - event: LiquidationEvent::ProceedsReceivedAndLiquidationCompleted
    entity: liquidation_1
    after: 24h
    values: {proceeds: 900000}

  - event: CollateralEvent::LiquidationCompleted
    entity: collateral_1
    after: 1h
